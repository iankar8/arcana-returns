---
title: 'Quickstart'
description: 'Make your first API call in 5 minutes'
---

## Get Your API Key

<Steps>
  <Step title="Sign up">
    Create an account at [arcana.returns/signup](https://arcana.returns/signup)
  </Step>
  <Step title="Generate API Key">
    Go to Dashboard â†’ Settings â†’ API Keys â†’ Create New Key
  </Step>
  <Step title="Save Your Key">
    Copy and save your API key (starts with `sk_test_...` or `sk_live_...`)
    
    <Warning>
      API keys are shown only once. Store them securely!
    </Warning>
  </Step>
</Steps>

## Import a Policy

Before making returns, you need a policy:

<CodeGroup>

```javascript Node.js
const response = await fetch('https://arcana-returns-api.fly.dev/policy/import', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer sk_test_...',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    source_type: 'text',
    source_content: 'Returns accepted within 30 days. Items must be in original packaging.',
    merchant_id: 'merchant_test'
  })
});

const policy = await response.json();
console.log('Policy ID:', policy.policy_id);
```

```bash cURL
curl -X POST https://arcana-returns-api.fly.dev/policy/import \
  -H "Authorization: Bearer sk_test_..." \
  -H "Content-Type: application/json" \
  -d '{
    "source_type": "text",
    "source_content": "Returns accepted within 30 days.",
    "merchant_id": "merchant_test"
  }'
```

</CodeGroup>

<Note>
  Save the `policy_id` from the response - you'll need it for returns!
</Note>

## Complete Return Flow

<Tip>
  **Production Safety:** Always include an `Idempotency-Key` header to prevent duplicate operations!
</Tip>

### 1. Issue Return Token

<CodeGroup>

```javascript Node.js
const tokenResponse = await fetch('https://arcana-returns-api.fly.dev/returns/token', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer sk_test_...',
    'Content-Type': 'application/json',
    'Idempotency-Key': `order-${orderId}-return-${Date.now()}`
  },
  body: JSON.stringify({
    order_id: 'ord_123456',
    customer_ref: 'cust_demo',
    items: [
      { sku: 'SHIRT-M-BLUE', qty: 1, price_cents: 2999 }
    ],
    reason_code: 'doesnt_fit',
    policy_id: 'plc_your_policy_id'
  })
});

const { return_token, risk_score, required_evidence } = await tokenResponse.json();
```

```bash cURL
curl -X POST https://arcana-returns-api.fly.dev/returns/token \
  -H "Authorization: Bearer sk_test_..." \
  -H "Content-Type: application/json" \
  -H "Idempotency-Key: order-123-return-001" \
  -d '{
    "order_id": "ord_123456",
    "customer_ref": "cust_demo",
    "items": [{"sku": "SHIRT-M-BLUE", "qty": 1, "price_cents": 2999}],
    "reason_code": "doesnt_fit",
    "policy_id": "plc_your_policy_id"
  }'
```

</CodeGroup>

<Info>
  The `return_token` is a signed JWT that expires in 15 minutes.
</Info>

### 2. Authorize with Evidence

<CodeGroup>

```javascript Node.js
const authResponse = await fetch('https://arcana-returns-api.fly.dev/returns/authorize', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer sk_test_...',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    return_token: return_token,
    evidence: [
      { type: 'photo_packaging', url: 'https://example.com/photo.jpg' }
    ],
    dropoff_choice: 'mail_in'
  })
});

const { decision, label_credential } = await authResponse.json();
console.log('Decision:', decision); // 'approve', 'step_up', or 'deny'
```

```bash cURL
curl -X POST https://arcana-returns-api.fly.dev/returns/authorize \
  -H "Authorization: Bearer sk_test_..." \
  -H "Content-Type: application/json" \
  -d '{
    "return_token": "YOUR_RETURN_TOKEN",
    "evidence": [
      {"type": "photo_packaging", "url": "https://example.com/photo.jpg"}
    ],
    "dropoff_choice": "mail_in"
  }'
```

</CodeGroup>

### 3. Commit Return

<CodeGroup>

```javascript Node.js
const commitResponse = await fetch('https://arcana-returns-api.fly.dev/returns/commit', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer sk_test_...',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    return_token: return_token,
    receipt_event: {
      type: 'scan',
      carrier: 'UPS',
      ts: new Date().toISOString()
    }
  })
});

const { refund_instruction } = await commitResponse.json();
console.log('Refund:', refund_instruction); // 'instant', 'hold', 'partial', or 'deny'
```

```bash cURL
curl -X POST https://arcana-returns-api.fly.dev/returns/commit \
  -H "Authorization: Bearer sk_test_..." \
  -H "Content-Type: application/json" \
  -d '{
    "return_token": "YOUR_RETURN_TOKEN",
    "receipt_event": {
      "type": "scan",
      "carrier": "UPS",
      "ts": "2025-10-26T10:00:00Z"
    }
  }'
```

</CodeGroup>

<Success>
  ðŸŽ‰ You've completed your first return flow!
</Success>

## What's Next?

<CardGroup cols={2}>
  <Card title="API Reference" icon="book" href="/api-reference/returns/token">
    Explore all endpoints and parameters
  </Card>
  <Card title="Shopify Integration" icon="bag-shopping" href="/guides/shopify-integration">
    Integrate with your Shopify store
  </Card>
  <Card title="Examples" icon="code" href="/guides/examples/complete-flow">
    Working code examples
  </Card>
  <Card title="AEL & Replay" icon="clock-rotate-left" href="/concepts/audit-ledger">
    Learn about audit trail and debugging
  </Card>
</CardGroup>

## Common Issues

<AccordionGroup>
  <Accordion title="Error: RT-004 - Token expired">
    Return tokens expire after 15 minutes. Issue a new token if the customer takes too long.
  </Accordion>
  
  <Accordion title="Error: POL-001 - Policy not found">
    Make sure you've imported a policy and are using the correct `policy_id`.
  </Accordion>
  
  <Accordion title="Error: AUTH-001 - Invalid API key">
    Check that your API key is correct and hasn't been revoked. Keys start with `sk_test_` or `sk_live_`.
  </Accordion>
</AccordionGroup>

## Need Help?

<Card title="Support" icon="life-ring" href="mailto:api-support@arcana.returns">
  Email us at api-support@arcana.returns with your `trace_id` from error responses
</Card>
